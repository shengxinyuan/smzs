(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/payments"],{"2a6e":function(e,t,n){"use strict";var i=n("bc1c"),a=n.n(i);a.a},6075:function(e,t,n){"use strict";n.r(t);var i=n("f774"),a=n("7191");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("2a6e");var s,r=n("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"7b671ddd",null,!1,i["a"],s);t["default"]=c.exports},7191:function(e,t,n){"use strict";n.r(t);var i=n("b08c"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},9351:function(e,t,n){"use strict";(function(e){n("b7aa");i(n("66fd"));var t=i(n("6075"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},b08c:function(e,t,n){"use strict";(function(e){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={data:function(){return{height:"44",config:{title:"确认支付",color:"#ffffff",backgroundColor:[1,"#2d407a"]},action:"https://zuanshi.semoh.cn/api/uploads",token:{token:e.getStorageSync("token")},list:[],title:"立即支付",img_show:0,order_return:"",shop_data:"",image_det:"",pay_img:"",lists:[],pic:0,source:"app"}},computed:{statusBarHeight:function(){return e.getSystemInfoSync().statusBarHeight},navbarHeight:function(){var t=this;return e.getSystemInfoSync().statusBarHeight+t.height+"px"},screenWidth:function(){return e.getSystemInfoSync().screenWidth}},onLoad:function(e){o=this,e.source&&(this.source=e.source),this.order_return=e.data,this.shop_data=JSON.parse(e.shop),this.page_reader()},watch:{img_show:function(e){console.log(e);var t=0;0==e?(t=this.pay_img.alipay_money/100*this.shop_data.shop_price,this.pic=this.shop_data.shop_price+t):1==e?(t=this.pay_img.wechat_money/100*this.shop_data.shop_price,this.pic=this.shop_data.shop_price+t):this.pic=this.shop_data.shop_price}},methods:{success:function(e){console.log(e.data),this.image_det=e.data},page_reader:function(){var e=this;this.$api.get("bank_info").then((function(t){if(console.log(t),1==t.status){e.pay_img=t.data;var n=0;n=e.pay_img.alipay_money/100*e.shop_data.shop_price,console.log(n),e.pic=e.shop_data.shop_price+n,e.img_show=1,e.list=[{img:"https://zuanshi.semoh.cn/applet_static/my/payment/weixin.png",name:"微信支付",remake:"需扣除0.6%的手续费，方便快捷",display:!0,index:1},{img:"https://zuanshi.semoh.cn/applet_static/my/payment/yhka.png",name:"银行卡支付",remake:"无需手续费，需人工确认",display:!1,index:2},{img:"https://zuanshi.semoh.cn/applet_static/my/payment/yue.png",name:"余额支付",remake:"可以余额 0 ",display:!1,index:3},{img:"https://zuanshi.semoh.cn/applet_static/my/payment/zhuanzhang.png",name:"微信转账",remake:"无需手续费，需人工确认",display:!1,index:4},{img:"https://zuanshi.semoh.cn/applet_static/my/payment/zfb_zhuanz.png",name:"支付宝转账",remake:"无需手续费，需人工确认",display:!1,index:5}]}}))},img_d:function(t){var n=[];n.push(t),e.previewImage({urls:n})},clone:function(t){var n=this;e.setClipboardData({data:t,success:function(){n.com.msg("已复制")}})},goto_top:function(){e.navigateBack()},radion:function(e,t){console.log(e),this.list.forEach((function(t){e.name==t.name?t.display=!0:t.display=!1})),this.img_show=e.index},zfb_alipay:function(t){e.requestPayment({provider:"alipay",orderInfo:t,success:function(t){var n=this;e.showToast({title:"支付成功，正在跳转到订单列表..",icon:"none"});var i=2,a=setInterval((function(){i-=1,0==i&&("3d"===n.source?n.jumpThreeDesignOrderPage():e.redirectTo({url:"../my/order?state=20&index=2"}),clearInterval(a))}),1e3)},fail:function(t){e.showToast({title:"失败",icon:"none"})}})},weixin:function(t){var n={provider:"wxpay",timeStamp:t.timeStamp.toString(),nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign};console.log(n),e.requestPayment(i(i({},n),{},{success:function(e){o.wxNext(e)},fail:function(t){console.log(t),e.showToast({title:"支付失败",icon:"none"})}}))},wxNext:function(t){var n=this;e.showToast({title:"支付成功，正在跳转到订单列表..",icon:"none"});var i=2,a=setInterval((function(){i-=1,0==i&&("3d"===n.source?n.jumpThreeDesignOrderPage():e.redirectTo({url:"../my/order?state=20&index=2"}),clearInterval(a))}),1e3)},payment:function(){var t=this;if(3==this.img_show&&this.shop_data.menber_price-this.shop_data.shop_price<=0)return this.com.msg("您的余额不足，请切换支付方式"),!1;var n={bn_id:this.order_return,vip_id:this.shop_data.vip,type:this.img_show,image:this.image_det,wechat_applet:2};this.$api.post("pay",n).then((function(n){if(console.log(n),1==n.status){if(0==t.img_show)t.zfb_alipay(n.data);else if(1==t.img_show)t.weixin(n.data);else if(2==t.img_show||4==t.img_show||5==t.img_show)if(t.lists=t.$refs.uUpload.lists,0!=t.lists.length&&(t.image_det=t.lists[0].response.data),t.image_det){t.com.msg("已提交审核，通过后将会发货~");var i=2,a=setInterval((function(){i-=1,0==i&&("3d"===t.source?t.jumpThreeDesignOrderPage():e.redirectTo({url:"../my/order?state=10&index=1"}),clearInterval(a))}),1e3)}else t.com.msg("请上传支付成功截图");else if(3==t.img_show){t.com.msg("支付成功，正在跳转到订单列表..");var o=2,s=setInterval((function(){o-=1,0==o&&("3d"===t.source?t.jumpThreeDesignOrderPage():e.redirectTo({url:"../my/order?state=20&index=2"}),clearInterval(s))}),1e3)}}else t.com.msg(n.message)}))},jumpThreeDesignOrderPage:function(){e.navigateTo({url:"/pages/index/threedesign?url=myOrderList"})}}};t.default=s}).call(this,n("543d")["default"])},bc1c:function(e,t,n){},f774:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={zsHxNavbar:function(){return n.e("components/zs-hx-navbar/zs-hx-navbar").then(n.bind(null,"0b00"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"151f"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.pic.toFixed(2));e.$mp.data=Object.assign({},{$root:{g0:n}})},o=[]}},[["9351","common/runtime","common/vendor"]]]);