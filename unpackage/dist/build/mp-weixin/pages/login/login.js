(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{1279:function(e,t,n){"use strict";var o=n("e38d"),i=n.n(o);i.a},"44ea":function(e,t,n){"use strict";n.r(t);var o=n("da83"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},"4fb7":function(e,t,n){"use strict";var o=n("d876"),i=n.n(o);i.a},"5ce1":function(e,t,n){"use strict";n.r(t);var o=n("f5e9"),i=n("44ea");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("4fb7"),n("1279");var c,s=n("f0c5"),r=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"65c96eb3",null,!1,o["a"],c);t["default"]=r.exports},"919d":function(e,t,n){"use strict";(function(e){n("b7aa");o(n("66fd"));var t=o(n("5ce1"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},d876:function(e,t,n){},da83:function(e,t,n){"use strict";(function(e){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{Inv:0,page_show:!1,phone:"",pass:"",note:"",code:"",code_tit:"获取验证码",time:60,code_show:!0,cli_type:!0,type:!1,cid:"",info:{nickName:"微信用户",avatarUrl:"/static/avatar.png"}}},onLoad:function(){var t=this;n=this;var o=e.getStorageSync("clientid");o&&(this.cid=o,console.log(o)),e.getStorageSync("type"),this.page_show=!1,this.$api.get("ios").then((function(e){0==e.data.type?t.type=!0:t.type=!1}))},methods:{getInfo:function(){e.getUserProfile({desc:"用于完善用户信息",success:function(t){console.log(t);var o={rawData:t.rawData,signature:t.signature,encryptedData:t.encryptedData,iv:t.iv};e.login({provider:"weixin",success:function(t){console.log(t),o.code=t.code,console.log(o),n.$api.post("applet",o).then((function(t){if(console.log(t),n.cli_type=!1,1==t.status){var o=(new Date).getTime(),i=1e3*t.data.member_info.vip_time;i<=o?e.setStorageSync("viptype",!1):e.setStorageSync("viptype",!0),e.setStorageSync("token",t.data.token),e.setStorageSync("member_info",t.data.member_info),e.setStorageSync("member_info_img",t.data.member_info.avatar),e.setStorageSync("coupon",0),e.showToast({title:"请稍后...",icon:"loading",duration:2e3});var a=2,c=setInterval((function(){0==a?(clearInterval(c),n.com.rel("../index/index")):a-=1}),1e3)}else n.cli_type=!0,n.com.msg(t.message)}))}})},fail:function(e){console.log(e)}})},go:function(){e.redirectTo({url:"../index/index"})},qieh:function(e){this.Inv=e,0==e?this.pass="":this.note=""},yesag:function(){e.setStorageSync("type",1),this.page_show=!1},agreement:function(e){1==e?this.com.navto("./fuwu"):this.com.navto("./yinsi")},acquireCode:function(){var e=this;if(""!=this.phone&&/^1[3456789]\d{9}$/.test(this.phone)){this.time=60,this.code_show=!1;var t=setInterval((function(){0==e.time?(e.code_tit="再次获取",e.code_show=!0,clearInterval(t)):e.time-=1}),1e3);this.$api.get("messagecode",{mobile:this.phone}).then((function(e){console.log(e)}))}else this.com.msg("请检查手机号")},app_login:function(){this.cli_type&&this.login_function()},login_function:function(){var t=this;this.cli_type=!1,this.$api.post("login",{mobile:this.phone,password:this.pass,note:this.note,cid:this.cid}).then((function(n){if(console.log(n),t.cli_type=!1,1==n.status){var o=(new Date).getTime(),i=1e3*n.data.member_info.vip_time;i<=o?e.setStorageSync("viptype",!1):e.setStorageSync("viptype",!0),e.setStorageSync("token",n.data.token),e.setStorageSync("member_info",n.data.member_info),e.setStorageSync("member_info_img",n.data.member_info.avatar),e.setStorageSync("coupon",0),e.showToast({title:"请稍后...",icon:"loading",duration:2e3});var a=2,c=setInterval((function(){0==a?(clearInterval(c),t.com.rel("../index/index")):a-=1}),1e3)}else t.cli_type=!0,t.com.msg(n.message)}))},go_register:function(){e.navigateTo({url:"./register"})},go_forget:function(t){e.navigateTo({url:"./forget?type="+t})},weixin:function(){var t=this;e.login({provider:"weixin",success:function(n){e.setStorageSync("openid",n.authResult.openid),t.$api.post("getWxUserInfo",{access_token:n.authResult.access_token,openid:n.authResult.openid}).then((function(n){if(console.log(n),1==n.status)if(0==n.data.login_type)t.com.navto("./bangding");else{var o=(new Date).getTime(),i=1e3*n.data.member_info.vip_time;i<=o?e.setStorageSync("viptype",!1):e.setStorageSync("viptype",!0),e.setStorageSync("token",n.data.token),e.setStorageSync("member_info",n.data.member_info),e.setStorageSync("member_info_img",n.data.member_info.avatar),e.setStorageSync("coupon",0),e.showToast({title:"请稍后...",icon:"loading",duration:2e3});var a=2,c=setInterval((function(){0==a?(clearInterval(c),e.reLaunch({url:"../index/index"})):a-=1}),1e3)}}))}})}}};t.default=o}).call(this,n("543d")["default"])},e38d:function(e,t,n){},f5e9:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},a=[]}},[["919d","common/runtime","common/vendor"]]]);