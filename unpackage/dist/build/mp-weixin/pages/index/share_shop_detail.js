(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/share_shop_detail"],{"17bef":function(t,e,i){"use strict";var s=i("d496"),n=i.n(s);n.a},4954:function(t,e,i){},"534f":function(t,e,i){"use strict";var s=i("4954"),n=i.n(s);n.a},6558:function(t,e,i){"use strict";i.r(e);var s=i("98fe"),n=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);e["default"]=n.a},"98fe":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{value:1,shop_num:1,shop_type:0,jg_ind:"",bgcolor:"",opacity:0,head_ind:0,specClass:"none",specSelected:[],swiperCurrent:0,favorite:!0,shareList:[],imgList:[],pingl:0,tuij:0,detail_shop:0,shop_id:0,shop_det:"",stynumber:[],shop_list:"",member:"",shopsku:"",shoptype_id:"",sku_ids:"",details:"",commentlist:"",autoplay:!1,return_top:!1,skuShow:!1,stock:0,videoShow:!1,stocks:1}},onPageScroll:function(t){t.scrollTop>300?this.return_top=!0:this.return_top=!1,this.opacity=t.scrollTop/180,t.scrollTop>=this.pingl&&t.scrollTop<this.detail_shop?this.head_ind=1:t.scrollTop>=this.detail_shop&&t.scrollTop<this.tuij?this.head_ind=2:t.scrollTop>=this.tuij?this.head_ind=3:0==t.scrollTop&&(this.head_ind=0)},onLoad:function(t){this.shop_id=t.shop_id,this.page_render()},onReady:function(e){this.videoContext=t.createVideoContext("myVideo")},methods:{ZhanTing:function(){1==this.autoplay&&(this.autoplay=!1)},zanting:function(){this.videoShow=!1},valChange:function(t){this.shop_num=t.value},page_render:function(){var e=this;this.$api.get("goods/"+this.shop_id+"?member_id="+t.getStorageSync("member_id")+"&is_h5=1").then((function(t){1==t.status&&(e.shop_det=t.data,e.shoptype_id=t.data.id,e.stynumber=[{name:"款号",num:t.data.model_no},{name:"库存",num:t.data.stock},{name:"成色",num:t.data.texture},{name:"销量",num:t.data.sale}],e.sku())})),this.$api.post("goods",{is_recommend:1}).then((function(t){1==t.status&&(e.shop_list=t.data.data)})),this.$api.get("commentlist/"+this.shop_id).then((function(t){1==t.status&&(e.commentlist=t.data)}))},like_collect:function(t){var e=this;this.$api.put("collect",{id:t}).then((function(t){1==t.status&&e.page_render()}))},shop_pay:function(e){var i=this,s={goods_id:this.shop_id,sku_id:this.jg_ind,count:this.shop_num,type:0,is_h5:1};""!=this.jg_ind?this.shop_num>this.stock?this.com.msg("库存不足~"):(this.toggleSpec(),1==e?this.com.navto("./confirm_payment?data="+JSON.stringify(s)):this.$api.post("cart",{shop_goods_id:this.shop_id,count:this.shop_num,shop_goods_sku_id:this.jg_ind,is_h5:1,member_id:t.getStorageSync("member_id")}).then((function(t){i.com.msg(t.message),i.skuShow=!1}))):this.com.msg("请选择规格")},zhifu:function(t){this.value=1,this.jg_ind=t.id,this.stock=t.stock,this.stocks=t.stock,console.log(this.stock)},goto_cart:function(){t.switchTab({url:"../cart/cart"})},goto_page:function(t){this.com.navto(t)},skipIndex:function(){t.switchTab({url:"./index"})},head_nav_cli:function(e){this.head_ind=e;0==e&&t.pageScrollTo({scrollTop:0,duration:200,success:function(t){this.head_ind=0}})},swiperChange:function(t){this.swiperCurrent=t.detail.current},banner_cli:function(e){if(this.shop_det.video)if(0==e)this.videoShow=!0;else{var i=[];this.shop_det.album.forEach((function(t,e){0!=e&&i.push(t.img0)})),t.previewImage({urls:i,loop:!0})}else{var s=[];this.shop_det.album.forEach((function(t,e){s.push(t.img0)})),t.previewImage({urls:s,loop:!0})}},payment_yes:function(t){this.skuShow=!0,this.shop_type=t,this.sku()},sku:function(){var e=this;this.$api.get("sku",{type:0,id:this.shoptype_id,member_id:t.getStorageSync("member_id")}).then((function(t){console.log(t),1==t.status&&(e.shopsku=t.data,e.details=t.data.data)}))},toggleSpec:function(){var t=this;"show"===this.specClass?(this.specClass="hide",setTimeout((function(){t.specClass="none"}),2500)):"none"===this.specClass&&(this.specClass="show")},selectSpec:function(t,e,i){var s=this,n=this.shopsku.title[t];n.data.forEach((function(t){t.pid===i&&s.$set(t,"selected",!1)})),this.$set(n.data[e],"selected",!0),this.specSelected="",this.shopsku.title.forEach((function(t){t.data.forEach((function(e){if(1==e.selected){s.specSelected+=e.id+",";var i="";s.sku_ids=s.specSelected.substr(0,s.specSelected.length-1),i=s.sku_ids.replace(/\,/g,""),t.data.length==i.length&&s.$api.get("sku",{type:0,id:s.shoptype_id,sku_ids:s.sku_ids}).then((function(t){console.log(t),1==t.status&&(s.details=t.data.data)}))}}))}))},toFavorite:function(){this.favorite=!this.favorite},buy:function(){t.navigateTo({url:"/pages/order/createOrder"})},stopPrevent:function(){},skipShare:function(){t.navigateTo({url:"./mshare?data="+JSON.stringify(this.shop_det)})}}};e.default=i}).call(this,i("543d")["default"])},d205:function(t,e,i){"use strict";(function(t){i("4963");s(i("66fd"));var e=s(i("d988"));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},d496:function(t,e,i){},d6fe:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return s}));var s={uIcon:function(){return i.e("uview-ui/components/u-icon/u-icon").then(i.bind(null,"c93f"))},uParse:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-parse/u-parse")]).then(i.bind(null,"5073"))},zsShoppingList:function(){return i.e("components/zs-shopping-list/zs-shopping-list").then(i.bind(null,"3b6a"))},uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"dc81"))},uNumberBox:function(){return i.e("uview-ui/components/u-number-box/u-number-box").then(i.bind(null,"e4913"))}},n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.details,(function(e,i){var s=t.__get_orig(e),n=(e.weight/1).toFixed(2),o=(e.labor/1/(e.weight/1)).toFixed(2);return{$orig:s,g0:n,g1:o}})));t.$mp.data=Object.assign({},{$root:{l0:i}})},o=[]},d988:function(t,e,i){"use strict";i.r(e);var s=i("d6fe"),n=i("6558");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("17bef"),i("534f");var a,u=i("f0c5"),c=Object(u["a"])(n["default"],s["b"],s["c"],!1,null,"690363f4",null,!1,s["a"],a);e["default"]=c.exports}},[["d205","common/runtime","common/vendor"]]]);