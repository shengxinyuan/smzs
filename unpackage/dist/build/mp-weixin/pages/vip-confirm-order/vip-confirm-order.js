(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/vip-confirm-order/vip-confirm-order"],{2162:function(i,t,s){"use strict";(function(i){s("4963");e(s("66fd"));var t=e(s("21fd"));function e(i){return i&&i.__esModule?i:{default:i}}wx.__webpack_require_UNI_MP_PLUGIN__=s,i(t.default)}).call(this,s("543d")["createPage"])},"21fd":function(i,t,s){"use strict";s.r(t);var e=s("e4dc"),h=s("3297");for(var a in h)"default"!==a&&function(i){s.d(t,i,(function(){return h[i]}))}(a);s("2a9e"),s("fe63");var o,n=s("f0c5"),c=Object(n["a"])(h["default"],e["b"],e["c"],!1,null,"35d1cd68",null,!1,e["a"],o);t["default"]=c.exports},"2a9e":function(i,t,s){"use strict";var e=s("6958"),h=s.n(e);h.a},3297:function(i,t,s){"use strict";s.r(t);var e=s("566c"),h=s.n(e);for(var a in e)"default"!==a&&function(i){s.d(t,i,(function(){return e[i]}))}(a);t["default"]=h.a},"566c":function(i,t,s){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={data:function(){return{textarea_val:"",input_show:!1,show:!1,list:[{name:"邮寄"},{name:"代发"},{name:"自提"},{name:"送货上门"}],current:0,activeColor:"#2d407a",borderRadius:"30upx",checked:!0,checked02:!0,checked03:!1,popupShow01:!1,premiumPay:"",hangSignTitle:"国家珠宝玉石适量监督检验中心",zhengshuTitle:"北京市中工商联珠宝检测中心",packingChargePay:"1.0",goodsMoney:"14748.32",noticeTexts01:"*因珠宝产品属于贵重物品，一旦出库，产品无质量问题暂不退换货品！建议您对已购买产品进行保价，未保价的包裹丢失或毁损的，不予赔偿，公司无需承担赔偿责任！",noticeTexts02:"*因珠宝产品属于贵重物品，一旦出库，产品无质量问题暂不退换货品！",ind:1,datas:"",imgind:0,zhanshi:"",popupnum:0,viptype:!1,total:0,address:"",address_send:"",address_bier:"",postage:0,hezi:"",hezi_pic:0,coupon:0,viptype_num:0,sign_num:0,sign_certificate:0,goldBuckle:0,cantuan_id:"",shoptypes:0,time:"",nums_bj:0,coupon_id:0,guaq_pic_show:!1,guaq_show:!1,cli_type:!0,hezi_ids:0,guaqian:0,zhens:0,types:0}},onUnload:function(){clearInterval(this.time)},onLoad:function(t){console.log(t),t.data?(this.types=t.types,this.datas=JSON.parse(t.data),this.datas&&void 0!==this.datas.cantuan&&(this.cantuan_id=this.datas.cantuan),this.datas&&1==this.datas.activity?this.shoptypes=this.datas.activity:this.shoptypes=this.datas.type,this.datas&&this.datas.current&&(this.current=this.datas.current),this.page_reader()):this.page_reader(),this.viptype=i.getStorageSync("viptype"),i.removeStorageSync("address"),i.removeStorageSync("address_bier"),i.removeStorageSync("address_send"),i.removeStorageSync("ids"),i.removeStorageSync("coupon")},watch:{zj_pic:function(i,t){console.log(i,t)},viptype:function(){1==this.viptype_num&&(this.total=this.total+JSON.parse(this.zhanshi.vip))},deep:!0},computed:{liread:function(){var i=0;return this.zhanshi&&this.zhanshi.data.forEach((function(t){i+=t.goods_money_normal-t.goods_money_vip})),i.toFixed(2)},shop_price:function(){var i=0;return i=this.viptype?this.zhanshi.money_vip:this.zhanshi.money,i},zj_pic:function(){0==this.current||1==this.current?1==this.ind?1==this.guaq_pic_show?1==this.guaq_show?this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+parseFloat(this.postage)+this.nums_bj+this.zhens+this.guaqian:this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+parseFloat(this.postage)+this.nums_bj+this.zhens:1==this.guaq_show?this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+parseFloat(this.postage)+this.nums_bj+this.guaqian:this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+parseFloat(this.postage)+this.nums_bj:1==this.guaq_pic_show?1==this.guaq_show?this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+this.nums_bj+this.zhens+this.guaqian:this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+this.nums_bj+this.zhens:1==this.guaq_show?this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+this.nums_bj+this.guaqian:this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+this.nums_bj:2==this.current?1==this.guaq_pic_show?1==this.guaq_show?this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+this.zhens+this.guaqian:this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+this.zhens:1==this.guaq_show?this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+this.guaqian:this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon:3==this.current&&(1==this.guaq_pic_show?1==this.guaq_show?this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+parseFloat(this.postage)+this.zhens+this.guaqian:this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+parseFloat(this.postage)+this.zhens:1==this.guaq_show?this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+parseFloat(this.postage)+this.guaqian:this.total=this.shop_price+this.hezi_pic-this.goldBuckle-this.coupon+parseFloat(this.postage))},goldPrice:function(){var i=this,t=0;return this.zhanshi.data&&this.zhanshi.data.forEach((function(s){i.viptype?t+=JSON.parse(s.gold_g_vip):t+=JSON.parse(s.gold_g_normal)})),t.toFixed(2)},processCost:function(){var i=0;return this.zhanshi.data&&this.zhanshi.data.forEach((function(t){i+=JSON.parse(t.labor_money)})),i.toFixed(2)}},onShow:function(){if(i.getStorageSync("address")&&(this.address=i.getStorageSync("address"),this.freight()),i.getStorageSync("address_send")&&(this.address_send=i.getStorageSync("address_send"),this.freight()),i.getStorageSync("address_bier")&&(this.address_bier=i.getStorageSync("address_bier"),this.freight()),i.getStorageSync("ids")&&(this.hezi=i.getStorageSync("ids"),this.hezi_pic=this.zhanshi.packing_money+this.hezi.total),i.getStorageSync("coupon")){var t=i.getStorageSync("coupon");this.coupon=t.price,this.coupon_id=t.id,this.$forceUpdate()}},methods:{vip_kait:function(i){console.log(i),1==i?(this.viptype_num=1,this.viptype=!0):(this.viptype_num=0,this.total=this.total-JSON.parse(this.zhanshi.vip),this.viptype=!1)},freight:function(){var i=0;0==this.current&&(this.address.province&&(i=this.address.province==this.zhanshi.province?JSON.parse(this.zhanshi.in_province):JSON.parse(this.zhanshi.out_province)),this.postage=i.toFixed(2)),1==this.current&&(this.address_bier.province&&(console.log(this.address_bier.province),i=this.address_bier.province==this.zhanshi.province?JSON.parse(this.zhanshi.in_province):JSON.parse(this.zhanshi.out_province)),this.postage=i.toFixed(2))},go_pages:function(i){this.com.navto(i)},go_pages_add:function(){this.com.navto("../my/receiving?is_mine=1&type=0&current="+this.current)},guaq:function(i){this.guaq_show=i;var t=0;this.zhanshi.data.forEach((function(i){t+=i.order_count*i.sign})),console.log(t),this.guaqian=t,this.sign_num=1==i?1:0},guaq_pic:function(i){this.guaq_pic_show=i;var t=0;this.zhanshi.data.forEach((function(i){t+=i.order_count*i.sign_certificate})),console.log(t),1==i?(this.sign_certificate=1,this.zhens=t):this.sign_certificate=0,console.log(this.total)},baojia_cli:function(i){if(this.imgind=i,0==i){var t=this.shop_price/1e3;t<=1&&this.zhanshi?this.nums_bj=this.zhanshi.sf_valuation:t>1&&t<=2&&this.zhanshi?this.nums_bj=2*this.zhanshi.sf_valuation:this.nums_bj=Math.floor(t*this.zhanshi.sf_valuation)}else{var s=Math.floor(this.shop_price)/1e4;console.log(s),s<=1&&this.zhanshi?this.nums_bj=this.zhanshi.ocean_valuation:s>1&&s<=2&&this.zhanshi?this.nums_bj=2*this.zhanshi.ocean_valuation:this.nums_bj=(Math.floor(s)+1)*this.zhanshi.ocean_valuation}},fuk:function(i){this.ind=i,0==i&&(this.nums_bj=0),1==i&&this.baojia_cli(this.imgind)},page_reader:function(){var t=this;this.$api.post("orderdetail",this.datas).then((function(s){console.log(s),1==s.status&&(t.zhanshi=s.data,t.address=s.data.address_mine,console.log(t.types),1==t.types&&(t.address_bier=s.data.address_not_mine),0==t.types&&(t.address_bier=s.data.address_not_mine,t.address_send=s.data.address_not_mine),t.hezi_pic=s.data.packing_money+JSON.parse(s.data.peijian_price),i.getStorageSync("viptype")?t.zhanshi.viptype=!0:t.zhanshi.viptype=!1,t.freight(),t.golds(),t.baojia_cli(0),t.guaq(t.checked),t.guaq_pic(t.checked02),t.baojia_cli(0),t.$api.get("accessories").then((function(i){if(console.log(i),1==i.status){i.data.forEach((function(i){i.counds=0}));for(var s=0;s<i.data.length;s++)i.data[s].counds=0==s?1:0;var e={list:i.data};t.hezi=e}})))}))},golds:function(){var i=0;i=this.zhanshi.gold-this.zhanshi.gold_num>=0?this.zhanshi.gold_num/this.zhanshi.gold_money:this.zhanshi.gold/this.zhanshi.gold_money,this.goldBuckle=i<1?0:i},changeTabs:function(i){console.log(i),this.current=i,1==i&&(this.ind=1),this.freight()},change:function(i){console.log(i)},openPopup01:function(i){this.popupnum=i,this.popupShow01=!0},skipAddedServices:function(){""!=this.hezi?i.navigateTo({url:"added-services?price="+this.zhanshi.packing_money+"&data="+JSON.stringify(this.hezi)}):i.navigateTo({url:"added-services?price="+this.zhanshi.packing_money})},skipDiscountSelect:function(){var t="",s="",e="",h="";this.zhanshi.data&&this.zhanshi.data.forEach((function(i){t+=i.cate_id+",",s+=i.goods_money_normal+",",e=t.substr(0,t.length-1),h=s.substr(0,s.length-1)})),i.navigateTo({url:"../my/discount_select?ids="+e+"&price="+h})},submit_order:function(){var t=this;if(void 0===this.address.id)return this.com.msg("请添加收货地址"),!1;if(void 0===this.address_bier.id&&1==this.current)return this.com.msg("请添加代发收货地址"),!1;var s={valuation:this.nums_bj,goods_id:void 0===this.datas.goods_id?0:this.datas.goods_id,sku_id:void 0===this.datas.sku_id?0:this.datas.sku_id,count:void 0===this.datas.count?0:this.datas.count,type:void 0===this.shoptypes?0:this.shoptypes,address_id:1==this.current?this.address_bier.id:this.address.id,shop_accessories_ids:void 0===this.hezi.id?this.zhanshi.peijian_id:this.hezi.id,shop_accessories_counts:void 0===this.hezi.count?1:this.hezi.count,vip:this.viptype_num,message:this.textarea_val,store_address_id:1==this.current?this.address.id:0,sf_change:this.ind,sign_certificate:this.sign_certificate,sign:this.sign_num,gold:this.goldBuckle<1?0:1,group_id:this.cantuan_id,activity_id:void 0===this.datas.kaituan?0:this.datas.kaituan,sf_type:this.current+1,coupon_id:this.coupon_id,bn:void 0===this.datas.bn?"":this.datas.bn};console.log(s);var e={vip:this.viptype_num,menber_price:this.zhanshi.member_money,shop_price:this.total<=0?.01:this.total};this.cli_type?(this.cli_type=!1,this.com.msg("正在生成订单"),3==this.current?this.address.area==this.zhanshi.area?this.$api.post("orders",s).then((function(s){if(console.log(s),t.com.msg(s.message),1==s.status){var h=2;t.time=setInterval((function(){0==h?(clearInterval(t.time),i.redirectTo({url:"../my/payments?data="+s.data.data.bn+"&shop="+JSON.stringify(e)})):h-=1}),1e3)}})):this.com.msg("超出配送范围"):this.$api.post("orders",s).then((function(s){if(console.log(s),t.com.msg(s.message+",请勿操作"),1==s.status){var h=2;t.time=setInterval((function(){0==h?(clearInterval(t.time),i.redirectTo({url:"../my/payments?data="+s.data.data.bn+"&shop="+JSON.stringify(e)})):h-=1}),1e3)}}))):this.com.msg("请勿重复点击")}}};t.default=s}).call(this,s("543d")["default"])},6958:function(i,t,s){},af7a:function(i,t,s){},e4dc:function(i,t,s){"use strict";s.d(t,"b",(function(){return h})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return e}));var e={uIcon:function(){return s.e("uview-ui/components/u-icon/u-icon").then(s.bind(null,"c93f"))},uTabs:function(){return Promise.all([s.e("common/vendor"),s.e("uview-ui/components/u-tabs/u-tabs")]).then(s.bind(null,"0ec5"))},uPopup:function(){return s.e("uview-ui/components/u-popup/u-popup").then(s.bind(null,"dc81"))},uSwitch:function(){return s.e("uview-ui/components/u-switch/u-switch").then(s.bind(null,"e1fa"))}},h=function(){var i=this,t=i.$createElement,s=(i._self._c,i.__map(i.zhanshi.data,(function(t,s){var e=i.__get_orig(t),h=1!=t.is_height||i.viptype?null:(t.gold_g_normal/1).toFixed(2),a=1==t.is_height&&i.viptype?(t.gold_g_vip/1).toFixed(2):null,o=1==t.is_height&&i.viptype?(t.labor_money/1/(t.wage/1)).toFixed(2):null,n=1!=t.is_height||i.viptype?null:(t.labor_money/1/(t.wage/1)).toFixed(2);return{$orig:e,g0:h,g1:a,g2:o,g3:n}}))),e=(i.goldBuckle*i.zhanshi.gold_money).toFixed(0),h=i.total<=0?null:i.total.toFixed(2);i._isMounted||(i.e0=function(t){i.show=!0},i.e1=function(t){i.input_show=!0}),i.$mp.data=Object.assign({},{$root:{l0:s,g4:e,g5:h}})},a=[]},fe63:function(i,t,s){"use strict";var e=s("af7a"),h=s.n(e);h.a}},[["2162","common/runtime","common/vendor"]]]);